# 系统功能完善计划

本计划旨在响应用户需求，完善数据库字段说明并新增注册接口。

## 1. 数据库字段说明 (SQL Schema Enhancement)

* **目标**: 为 `docs/schema.sql` 中的每个表字段添加 `COMMENT` 注释，提高数据库可读性。

* **涉及文件**: `docs/schema.sql`

* **变更详情**:

  * `sys_users`: 添加 id(主键), username(用户名), role(角色), status(状态) 等注释。

  * `wms_materials`: 添加 code(物料编码), name(名称), spec(规格) 等注释。

  * `wms_inventory`: 添加 batch\_no(批号), expiry\_date(有效期), current\_qty(当前库存) 等注释。

  * `wms_outbound`: 添加 outbound\_no(领出单号), status(使用状态), snap\_expiry\_date(快照有效期) 等注释。

## 2. 新增注册接口 (Register API)

* **目标**: 实现基于账号密码的注册功能。

* **涉及模块**:

  * **Controller**: `internal/controllers/auth_controller.go`

    * 新增 `Register` 方法。

    * 定义 `RegisterReq` 结构体 (Username, Password, RealName)。

    * 添加 Swagger 注解。

  * **Service**: `internal/services/auth_service.go`

    * 现有的 `Register` 方法已存在，需确认逻辑是否满足（目前仅供内部调用，需暴露给 Controller）。

    * 默认注册角色设为 `User` (普通用户)，状态为 `1` (正常)。

  * **Router**: `internal/routers/router.go`

    * 在 `/auth` 组下新增 `POST /register` 路由（公开访问）。

## 3. 执行步骤

1. **修改 SQL**: 更新 `docs/schema.sql` 添加字段注释。
2. **实现注册**: 在 `auth_controller.go` 中添加注册逻辑，并配置路由。
3. **更新文档**: 重新生成 Swagger 文档。
4. **验证**: 检查代码编译及接口定义。

